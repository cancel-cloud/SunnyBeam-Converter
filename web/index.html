<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Dashboard - SunnyBeam Auswertung</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>☀️ Solar Dashboard</h1>
            <p class="subtitle">SunnyBeam Datenauswertung</p>
        </header>

        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Lade Daten...</p>
        </div>

        <div id="error" class="error" style="display: none;">
            <h2>Fehler beim Laden der Daten</h2>
            <p id="error-message"></p>
            <div class="info-box">
                <h3>Mögliche Lösungen:</h3>
                <ul>
                    <li>Stellen Sie sicher, dass die JAR-Datei ausgeführt wurde</li>
                    <li>Prüfen Sie, ob die Datei <code>output/dashboard-data.json</code> existiert</li>
                    <li>Öffnen Sie diese Seite über einen lokalen Webserver:
                        <pre>python3 -m http.server 8000</pre>
                        dann öffnen Sie <code>http://localhost:8000/web/</code>
                    </li>
                </ul>
            </div>
        </div>

        <div id="content" style="display: none;">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Verfügbare Monate</div>
                    <div class="stat-value" id="total-months">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Gesamt-Ertrag (alle Monate)</div>
                    <div class="stat-value" id="total-energy">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Letzte Aktualisierung</div>
                    <div class="stat-value" id="last-update">-</div>
                </div>
            </div>

            <div class="month-selector">
                <label for="month-select">Monat auswählen:</label>
                <select id="month-select">
                    <option value="">-- Bitte wählen --</option>
                </select>
            </div>

            <div id="month-details" style="display: none;">
                <div class="section">
                    <h2 id="month-title">Monatsübersicht</h2>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Monats-Ertrag</div>
                            <div class="stat-value" id="month-total">-</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Durchschnitt pro Tag</div>
                            <div class="stat-value" id="month-average">-</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Bester Tag</div>
                            <div class="stat-value" id="month-best">-</div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>Täglicher Ertrag</h3>
                        <canvas id="daily-chart"></canvas>
                    </div>

                    <div class="table-container">
                        <h3>Detaillierte Tagesübersicht</h3>
                        <table id="daily-table">
                            <thead>
                                <tr>
                                    <th>Datum</th>
                                    <th>Ertrag (kWh)</th>
                                    <th>Erster Wert</th>
                                    <th>Letzter Wert</th>
                                    <th>Messungen</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>SunnyBeam Solar Data Aggregator v1.0.0</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
